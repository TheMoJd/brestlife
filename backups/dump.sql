--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2 (Debian 17.2-1.pgdg120+1)
-- Dumped by pg_dump version 17.2 (Debian 17.2-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: public; Type: SCHEMA; Schema: -; Owner: dev
--

-- *not* creating schema, since initdb creates it


ALTER SCHEMA public OWNER TO dev;

--
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: dev
--

COMMENT ON SCHEMA public IS '';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: categories; Type: TABLE; Schema: public; Owner: dev
--

CREATE TABLE public.categories (
    id integer NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    sub_category character varying(100) NOT NULL,
    type character varying(255) NOT NULL,
    created_by integer,
    CONSTRAINT categories_type_check CHECK (((type)::text = ANY (ARRAY[('PLACE'::character varying)::text, ('JOB'::character varying)::text, ('EVENT'::character varying)::text, ('DEAL'::character varying)::text])))
);


ALTER TABLE public.categories OWNER TO dev;

--
-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: dev
--

ALTER TABLE public.categories ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: deals; Type: TABLE; Schema: public; Owner: dev
--

CREATE TABLE public.deals (
    id integer NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    link character varying(255),
    title character varying(200) NOT NULL,
    updated_at timestamp(6) without time zone,
    category_id integer,
    created_by integer NOT NULL,
    company character varying(255),
    date_end timestamp(6) without time zone,
    new_price double precision,
    old_price double precision,
    reserve character varying(255)
);


ALTER TABLE public.deals OWNER TO dev;

--
-- Name: deals_id_seq; Type: SEQUENCE; Schema: public; Owner: dev
--

ALTER TABLE public.deals ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.deals_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: events; Type: TABLE; Schema: public; Owner: dev
--

CREATE TABLE public.events (
    id integer NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    date timestamp(6) without time zone NOT NULL,
    description text NOT NULL,
    image_url character varying(255),
    location character varying(255) NOT NULL,
    price double precision,
    title character varying(200) NOT NULL,
    category_id integer NOT NULL,
    created_by integer
);


ALTER TABLE public.events OWNER TO dev;

--
-- Name: events_id_seq; Type: SEQUENCE; Schema: public; Owner: dev
--

ALTER TABLE public.events ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: jobs; Type: TABLE; Schema: public; Owner: dev
--

CREATE TABLE public.jobs (
    id integer NOT NULL,
    company_name character varying(150) NOT NULL,
    contact_email character varying(150),
    created_at timestamp(6) without time zone NOT NULL,
    description text NOT NULL,
    duration character varying(50),
    end_date date,
    location character varying(255) NOT NULL,
    start_date date,
    title character varying(200) NOT NULL,
    category_id integer NOT NULL,
    created_by integer
);


ALTER TABLE public.jobs OWNER TO dev;

--
-- Name: jobs_id_seq; Type: SEQUENCE; Schema: public; Owner: dev
--

ALTER TABLE public.jobs ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.jobs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: places; Type: TABLE; Schema: public; Owner: dev
--

CREATE TABLE public.places (
    id integer NOT NULL,
    address character varying(255) NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    image_url character varying(255),
    latitude double precision,
    longitude double precision,
    name character varying(150) NOT NULL,
    category_id integer NOT NULL,
    created_by integer,
    price double precision
);


ALTER TABLE public.places OWNER TO dev;

--
-- Name: places_id_seq; Type: SEQUENCE; Schema: public; Owner: dev
--

ALTER TABLE public.places ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.places_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: dev
--

CREATE TABLE public.users (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    email character varying(150) NOT NULL,
    password character varying(255) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    role character varying(20) NOT NULL,
    updated_at timestamp(6) without time zone,
    CONSTRAINT users_role_check CHECK (((role)::text = ANY (ARRAY[('STUDENT'::character varying)::text, ('ADMIN'::character varying)::text, ('COMPANY'::character varying)::text])))
);


ALTER TABLE public.users OWNER TO dev;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: dev
--

CREATE SEQUENCE public.users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.users_id_seq OWNER TO dev;

--
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: dev
--

ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;


--
-- Name: users id; Type: DEFAULT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);


--
-- Data for Name: categories; Type: TABLE DATA; Schema: public; Owner: dev
--

COPY public.categories (id, created_at, sub_category, type, created_by) FROM stdin;
1	2025-02-09 11:47:00	Culture	EVENT	1
2	2025-02-10 12:30:00	Sport	EVENT	1
3	2025-02-11 13:45:00	Restaurant	PLACE	2
4	2025-02-12 14:50:00	Technologie	JOB	3
5	2025-02-13 15:20:00	Shopping	DEAL	3
7	2025-03-06 15:13:46	CDD	JOB	1
8	2025-03-06 15:14:09	Stage	JOB	1
9	2025-03-06 15:15:18	CDI	JOB	1
\.


--
-- Data for Name: deals; Type: TABLE DATA; Schema: public; Owner: dev
--

COPY public.deals (id, created_at, description, link, title, updated_at, category_id, created_by, company, date_end, new_price, old_price, reserve) FROM stdin;
1	2025-02-13 14:55:48	Réduction de 20% sur tous les articles de sport.	https://sportshop.com	Offre Sport	2025-02-14 14:55:48	5	1	SportShop	2025-03-01 00:00:00	49.99	59.99	Étudiants
2	2025-02-14 15:30:00	Promotion spéciale : 2 plats pour le prix d'un.	https://restaurant.com	Offre Restaurant	2025-02-15 15:30:00	3	2	Restaurant Gourmand	2025-02-28 00:00:00	15	30	Tous
\.


--
-- Data for Name: events; Type: TABLE DATA; Schema: public; Owner: dev
--

COPY public.events (id, created_at, date, description, image_url, location, price, title, category_id, created_by) FROM stdin;
1	2025-02-09 11:46:10	2025-02-15 19:00:00	Concert de jazz avec des artistes locaux.	/img/concert.jpg	Salle de Concert de Brest	20	Concert de Jazz	1	1
2	2025-02-10 12:00:00	2025-02-16 10:00:00	Conférence sur l'intelligence artificielle.	/img/conference.jpg	Université de Brest	10	Conférence IA	1	3
\.


--
-- Data for Name: jobs; Type: TABLE DATA; Schema: public; Owner: dev
--

COPY public.jobs (id, company_name, contact_email, created_at, description, duration, end_date, location, start_date, title, category_id, created_by) FROM stdin;
2	Restaurant Gourmand	rh@restaurant.com	2025-02-12 14:50:00	Serveur pour service du soir.	CDD	2025-06-30	Brest	2025-03-01	Serveur	7	2
1	TechInnov	contact@techinnov.com	2025-02-11 13:45:00	Développeur full-stack avec expérience en React et Node.js.	CDI	2025-12-31	Brest	2025-03-01	Développeur Full-Stack	8	3
\.


--
-- Data for Name: places; Type: TABLE DATA; Schema: public; Owner: dev
--

COPY public.places (id, address, created_at, description, image_url, latitude, longitude, name, category_id, created_by, price) FROM stdin;
1	123 Rue de la Plage, Brest	2025-02-09 11:47:00	Plage idéale pour la baignade et les sports nautiques.	/img/plage.jpg	48.3833	-4.4833	Plage de Brest	3	1	0
2	456 Rue du Centre, Brest	2025-02-10 12:30:00	Centre commercial avec de nombreuses boutiques.	/img/centre_commercial.jpg	48.39	-4.47	Centre Commercial de Brest	3	2	0
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: dev
--

COPY public.users (id, name, email, password, created_at, role, updated_at) FROM stdin;
1	Admin User	admin@example.com	adminpassword	2025-02-09 11:45:17	ADMIN	2025-02-09 11:45:17
2	Student User	student@example.com	studentpassword	2025-02-10 12:00:00	STUDENT	2025-02-10 12:00:00
3	Company User	company@example.com	companypassword	2025-02-11 13:00:00	COMPANY	2025-02-11 13:00:00
\.


--
-- Name: categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dev
--

SELECT pg_catalog.setval('public.categories_id_seq', 9, true);


--
-- Name: deals_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dev
--

SELECT pg_catalog.setval('public.deals_id_seq', 2, true);


--
-- Name: events_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dev
--

SELECT pg_catalog.setval('public.events_id_seq', 2, true);


--
-- Name: jobs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dev
--

SELECT pg_catalog.setval('public.jobs_id_seq', 2, false);


--
-- Name: places_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dev
--

SELECT pg_catalog.setval('public.places_id_seq', 2, false);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: dev
--

SELECT pg_catalog.setval('public.users_id_seq', 3, true);


--
-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);


--
-- Name: deals deals_pkey; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.deals
    ADD CONSTRAINT deals_pkey PRIMARY KEY (id);


--
-- Name: events events_pkey; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.events
    ADD CONSTRAINT events_pkey PRIMARY KEY (id);


--
-- Name: jobs jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.jobs
    ADD CONSTRAINT jobs_pkey PRIMARY KEY (id);


--
-- Name: places places_pkey; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.places
    ADD CONSTRAINT places_pkey PRIMARY KEY (id);


--
-- Name: categories ukt806pivur7nn124jehx7cygw5; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT ukt806pivur7nn124jehx7cygw5 UNIQUE (sub_category);


--
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: categories fk5yfru0au6kpyqs4tonky5vfne; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT fk5yfru0au6kpyqs4tonky5vfne FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: deals fk9tii7qhrwtm0t22p08yp38p5b; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.deals
    ADD CONSTRAINT fk9tii7qhrwtm0t22p08yp38p5b FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: jobs fkag1hj06pxsv6fexoubroe6mn4; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.jobs
    ADD CONSTRAINT fkag1hj06pxsv6fexoubroe6mn4 FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: places fkayjup44mff03nvy1v9u2m7184; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.places
    ADD CONSTRAINT fkayjup44mff03nvy1v9u2m7184 FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: places fkca17w9kt9f18v0lr91ssmivx5; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.places
    ADD CONSTRAINT fkca17w9kt9f18v0lr91ssmivx5 FOREIGN KEY (category_id) REFERENCES public.categories(id);


--
-- Name: jobs fklunrv9ems34544ff26wyfa89v; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.jobs
    ADD CONSTRAINT fklunrv9ems34544ff26wyfa89v FOREIGN KEY (category_id) REFERENCES public.categories(id);


--
-- Name: events fkmpv90allsx91cxsj7xjcvvsxg; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.events
    ADD CONSTRAINT fkmpv90allsx91cxsj7xjcvvsxg FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: events fko6mla8j1p5bokt4dxrlmgwc28; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.events
    ADD CONSTRAINT fko6mla8j1p5bokt4dxrlmgwc28 FOREIGN KEY (category_id) REFERENCES public.categories(id);


--
-- Name: deals fkpnyh4swmor0cfhfjaefm5o9gh; Type: FK CONSTRAINT; Schema: public; Owner: dev
--

ALTER TABLE ONLY public.deals
    ADD CONSTRAINT fkpnyh4swmor0cfhfjaefm5o9gh FOREIGN KEY (category_id) REFERENCES public.categories(id);


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: dev
--

REVOKE USAGE ON SCHEMA public FROM PUBLIC;


--
-- PostgreSQL database dump complete
--

